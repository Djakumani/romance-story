<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../Css/Chapter_styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@300;500&display=swap">
    <title>ENFJ & INFP: Chapter 1 - The Meeting of Minds</title>
</head>

<nav class="top-menu">
    <ul>
        <li><a href="../../index.html">Home</a></li>
        <!-- Add more links as needed -->
    </ul>
</nav>

<body>
    <!-- Header Section -->
    <header class="mbti-header">
        <video class="header-video" autoplay loop muted>
            <source src="../../Assets/Videos/Fluid_1.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="header-content">
            <h1>ENFJ & INFP: A Gentle Flame</h1>
            <p>Chapter 3: The Shocking Reunion</p>
        </div>
    </header>

    <section class="chapter-content-section">
        <div class="container">
          <p id="line1" class="commentable">Next Chapter : Soon.
              </p>

        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
    
          <!-- More content here -->
        </div>

        <div class="chapter-navigation">
            <a href="Chapter_16.html" class="nav-button">Previous Chapter</a>
            <a href="Chapter_18.html" class="nav-button">Next Chapter</a>
        </div>
        
      </section>

  <!-- Comment Section -->
<section class="comment-section">
    <h3>Comments</h3>
    <!-- Form to Add Comments -->
    <form id="comment-form">
        <input type="text" id="comment-username" placeholder="Your Name (optional)" />
        <textarea id="comment-text" placeholder="Add your comment" required></textarea>
        <button type="submit">Post Comment</button>
    </form>

    <!-- List of Comments -->
    <div id="comments-list">
        <h4>All Comments</h4>
    </div>
</section>


  

   <!-- Playlist Section -->
   <section class="playlist-section">
    <h2>Listen to Our Official Playlist</h2>
    <iframe style="border-radius:12px" 
            src="https://open.spotify.com/embed/playlist/6SR6kcqpyw3skUYUtP161a?utm_source=generator" 
            width="100%" height="352" frameBorder="0" allowfullscreen="" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy">
    </iframe>
</section>



    <!-- Footer Section -->
    <footer class="footer-section bg-dark text-light py-4">
        <div class="container text-center">
            <div class="social-links">
                <a href="https://facebook.com" target="_blank">Facebook</a> |
                <a href="https://twitter.com" target="_blank">Twitter</a> |
                <a href="https://instagram.com" target="_blank">Instagram</a>
            </div>
            <p class="mt-3">&copy; 2024 MBTI Love Lab. All Rights Reserved.</p>
            <a href="privacy.html" class="text-light">Privacy Policy</a>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <script src="../../Js/Interactive_comments.js"></script>


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, orderBy, query } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
    
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        // Reference to the "comments" collection
        const commentsCollection = collection(db, "comments");
    
        // Handle Comment Form Submission
        document.getElementById("comment-form").addEventListener("submit", async (e) => {
            e.preventDefault();
            const username = document.getElementById("comment-username").value || "Anonymous";
            const text = document.getElementById("comment-text").value.trim();
    
            if (text) {
                try {
                    // Add a new comment to Firestore
                    await addDoc(commentsCollection, {
                        username,
                        text,
                        timestamp: serverTimestamp(),
                    });
                    document.getElementById("comment-form").reset();
                } catch (error) {
                    console.error("Error adding comment:", error.message);
                }
            } else {
                alert("Comment cannot be empty!");
            }
        });
    
        // Real-time Listener for Comments
        const commentsList = document.getElementById("comments-list");
        const q = query(commentsCollection, orderBy("timestamp", "asc"));
        onSnapshot(q, (snapshot) => {
            commentsList.innerHTML = "<h4>All Comments</h4>"; // Reset the list
            snapshot.forEach((doc) => {
                const comment = doc.data();
                const commentItem = document.createElement("div");
                commentItem.classList.add("comment-item");
                commentItem.innerHTML = `
                    <p><strong>${comment.username}:</strong> ${comment.text}</p>
                    <small>${comment.timestamp?.toDate().toLocaleString() || "Just now"}</small>
                `;
                commentsList.appendChild(commentItem);
            });
        });
    </script>
    



</body>

</html>
